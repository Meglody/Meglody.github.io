---
title: 读《Vue.js设计与实现》
tags:
---

> 第一篇 框架设计概览

> 第一章 权衡的艺术

讨论了命令式和声明式两种范式的差异：
- 命令式更加注重过程，性能高
- 声明式更加关注结果，性能差

命令式在`理论上`可以做大极致的优化，但是用户(这里，框架的用户既是开发者，后同)需要承受巨大的心智负担和高额维护成本；
而声明式能够有效的减少心智负担，并减少维护成本，在这个用人既是用钱的社会，人是第一成本，既是声明式则运行时性能会有一定的牺牲；
而框架设计者(Vue.js)就从这一切入点，想出办法将性能损耗进行最小化（注意：在声明式封装命令式的基础上，性能的损耗是必然的，所以Vuejs极力于将性能损耗降到最低）；

在这里霍春阳例举了一个声明式更新的性能消耗公式:

> 声明式更新的性能消耗 = 找出差异的性能消耗(B) + 直接修改的性能消耗(A)

Vuejs中虚拟DOM的存在意义就是为了极致的缩减B的性能消耗。

霍春阳将原生JS操作DOM的方法(createElement)、虚拟DOM、innerHTML三者进行了比较，结果如下:

                            性能

    低  ————————————————————————————————————————————————> 高

    | innerHTML    | vertialDOM | JS操作DOM(createElement) |
    | ------------ | ---------- | ------------------------ |
    | 心智负担中等 | 心智负担小 | 心智负担大 |
    | 可维护性一般 | 可维护性好 | 可维护性差 |
    | 性能差       | 性能不错   | 性能高 |

比较不是简单的下定论，而是与创建页面/更新页面，创建页面大小/变更部分大小，有关系；

最后结合心智负担和可维护性，发现虚拟DOM是个还不错的选择。

运行时和编译时的相关知识...待补充
